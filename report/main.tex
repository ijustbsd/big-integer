\section{Постановка задачи}

\begin{enumerate}
    \item Составьте алгоритм (в виде блок-схемы) и напишите (на любом языке программирования) соответствующую ему программу, позволяющую выполнять арифметические операции (сложение, вычитание, умножение и деление) над длинными целыми числами;
    % \item Составьте алгоритм и напишите соответствующую ему программу, позволяющую возводить целое число в квадрат;
    % \item Составьте алгоритм и напишите соответствующую ему программу, позволяющую возводить натуральное число в натуральную степень;
    % \item Cоставьте алгоритм и напишите соответствующую ему программу, позволяющую вычислять целую часть корня произвольной степени $m > 0$ из натурального числа;
    % \item Используя один из предложенных выше алгоритмов, составьте блок-схему и напишите соответствующую ей программу, позволяющую вычислять наибольший общий делитель двух больших натуральных чисел.
\end{enumerate}

\clearpage

\section{Используемые технологии}

Программа написана на языке программирования Python 3.9. Плюсом данного решения стало то, что ЯП Python
поддерживает работу с большими целыми числами и это позволило легко написать тесты для моей
программы. Программа использует только стандартную библиотеку Python, установка сторонних зависимостей
не требуется.

\clearpage

\section{Структура программы}

Вся программа состоит из трёх файлов:
\begin{enumerate}
    \item Основная программа (\textit{bigint.py}). В данном файле содержится класс \textit{BigInt},
    который позволяет совершать арифметические операции с длинными целыми числами. Для удобства работы
    с данным классом были перегружены основные арифметические операторы (такие как <<+>>, <<->>, <<*>> и пр.)
    и это позволило работать с объектами данного класса как с обычными числами.
    \item Библиотека функций для длинной арифметики (\textit{long\_math.py}). В данном файле содеражатся
    функции, которые работают с длинными числами и вызываются из класса \textit{BigInt}. Блок-схемы данных
    функций будут представлены ниже.
    \item Тесты работы программы (\textit{tests.py}). В данном файле содержатся юнит-тесты со следующим принципом работы:
    \begin{enumerate}
        \item Случайно выбираем 2 числа в промежутке от $-10^{30}$ до $10^{30}$;
        \item Преобразуем их в тип \textit{BigInt}. После этого у нас будет 2 пары одинаковых чисел. Одна пара типа
        \textit{int} из стандартной библиотеки, а вторая типа \textit{BigInt};
        \item Производим арифметические действия на обеих парах чисел и сравниваем получившиеся результаты.
        Если результаты отличаются, то выводим ошибку;
        \item Выполняем предыдущие пункты 100000 раз.
    \end{enumerate}
\end{enumerate}

\clearpage

\section{Описание используемых алгоритмов}

\subsection{Сложение}
Сложение реализовано в функции \textit{l\_add}. Для сложения используется алгоритм описанный в \cite{zavg}.

\subsection{Вычитание}
Вычитание реализовано в функции \textit{l\_sub}. Для вычитания используется алгоритм описанный в \cite{zavg}.

\subsection{Умножение}
Умножение реализовано в функции \textit{l\_mul}. Для умножения используется исправленный алгоритм умножения из \cite{zavg}.
Были внесены следующие изменения (синие строки были изменены, красные удалены, а зелёные добавлены):
\begin{enumerate}
    \item Вводим числа \textit{x} и \textit{y} в строковые переменные \textit{s1} и \textit{s2} соответственно.
    \item Определяем длины \textit{l1} и \textit{l2} строк \textit{s1} и \textit{s2} соответственно.
    \item Полагаем \textit{m} = max\{\textit{l1}, \textit{l2}\}
    \color{blue}
    \item Полагаем \textit{k} = (\textit{m} - 1) / 4 + 1
    \color{black}
    \item Полагаем \textit{n} = 4 * \textit{k}
    \item Дописываем \textit{n} - \textit{l1} нулей в начало строки \textit{s1} и \textit{n} - \textit{l2} нулей в началов строки \textit{s2}
    \color{blue}
    \item Полагаем \textit{osn} = $10^4$, \textit{st} = '0', \textit{n1} = \textit{n}
    \color{black}
    \item Цикл при изменении переменной \textit{j} от 1 до \textit{k} выполняем:
    \begin{enumerate}
        \color{red}
        \item Полагаем \textit{n1} = \textit{n} и \textit{w} = 0
        \color{black}
        \item Из строки \textit{s2} считываем 4 символа, начиная с позиции \textit{n1} - 3, преобразуем их в числовой формат и присваиваем целочисленной переменной \textit{b}.
        \color{green}
        \item Полагаем \textit{n2} = n, \textit{w} = 0, \textit{s3} = 0
        \color{black}
        \item Цикл при изменении переменной \textit{i} от 1 до \textit{k} выполняем:
        \begin{enumerate}
            \item Из строки \textit{s1} считываем 4 символа, начиная с позиции \textit{n} - 3, преобразуем их в числовой формат и присваиваем целочисленной переменной \textit{a}.
            \item Находим величину \textit{c} = \textit{a} * \textit{b} + \textit{w}
            \item Если \textit{c} < \textit{osn}, то \textit{z} = \textit{c}, \textit{w} = 0, иначе \textit{z} = \textit{c} \% \textit{osn}, \textit{w} = \textit{c} / \textit{osn}
            \item Преобразуем число \textit{z} в строковый формат и присваиваем строковой переменной \textit{s}.
            \item Если длина \textit{l} строки \textit{s} меньше 4, то дописываем 4 - \textit{l} нулей в начало строки \textit{s}.
            \item В начало строки \textit{s3} дописываем четыре символа строки \textit{s}.
            \color{red}
            \item Полагаем \textit{n} = \textit{n} - 4 и \textit{i} = \textit{i} + 1
            \color{black}
            \color{green}
            \item Полагаем \textit{s3} = \textit{s} + \textit{s3}, \textit{n2} = \textit{n2} - 4, \textit{i} = \textit{i} + 1
            \color{black}
        \end{enumerate}
        \item Если после выполнения \textit{i}-цикла имеем \textit{w} $\neq$ 0, то число \textit{w} преобразуем в строковый формат и полученную строку добавляем в начало строки \textit{s3}.
        \item Дописывем 4(\textit{j}-1) нулей в конец строки \textit{s3}.
        \item Используя алгоритм сложения, складываем числа, записанные в строках \textit{st} и \textit{s3}; результат сложения записывем в строковую переменную \textit{st}.
        \item Полагаем \textit{n1} = \textit{n1} - 4 и \textit{j} = \textit{j} + 1
    \end{enumerate}
\end{enumerate}

\subsection{Деление с остатком}
Деление с остатком реализовано в функции \textit{l\_divmod}. В качестве алгоритма используется деление в столбик
с небольшими модификациями для ускорения работы и сокращения количества итераций.

\subsection{Блок-схемы алгоритмов}
Ниже представлены блок-схемы функций, используемых для работы с длинными числами.
\includepdf{pdfs/add.pdf}
\includepdf{pdfs/sub.pdf}
\includepdf[pages=-]{pdfs/mul.pdf}
\includepdf{pdfs/divmod.pdf}

\clearpage

\section{Примеры работы программы}

Инициализруем несколько переменных объектами типа \textit{BigInt} и посмотрим на результаты арифметических операций:

\lstinputlisting{example_1.py}

Вывод программы:
\begin{itemize}
    \item x = -99999999999999999999
    \item y = 11111111111111111111
    \item x + y = -88888888888888888888
    \item x - y = -111111111111111111110
    \item x * y = -1111111111111111111088888888888888888889
    \item x / y = -9
    \item x mod y = 0
\end{itemize}

\clearpage

\section{Список литературы}

\nocite{*}

\printbibliography[heading=none]

\clearpage

\section{Исходный код}

Ниже приведён исходный код программы. К сожалению, пакет \textit{listings} для \LaTeX{} очень плохо работает с
русскими символами. Из-за этого русскоязычная часть программы стала плохо читаема.

\subsection{bigint.py}
\lstinputlisting{bigint.py}
\clearpage

\subsection{tests.py}
\lstinputlisting{tests.py}
\clearpage
